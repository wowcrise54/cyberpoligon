---
- name: Verify install_docker
  hosts: test_debian
  become: true
  gather_facts: false

  tasks:
    - package_facts:
      tags: always

    - ansible.builtin.assert:
        that: "'docker-ce' in ansible_facts.packages"
      tags: always

    - service_facts:
      tags: always

    - ansible.builtin.assert:
        that: ansible_facts.services['docker.service'].state == 'running'
      tags: always

    - stat:
        path: /usr/local/bin/docker-compose
      register: dc
      tags: always

    - ansible.builtin.assert:
        that: dc.stat.exists
      tags: always
